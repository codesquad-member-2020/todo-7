!function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0),n(1);var a=Object.freeze({REQUEST_URL:"http://ec2-34-236-160-204.compute-1.amazonaws.com:8080/projects/1"}),r=function(t,e,n){return fetch(t,{method:e,mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJwb29nbGUiLCJpZCI6MX0.ju5CGjqxRm5HkIJspZ-xY_LO5z6tmxlOqJ26M__GXf0"},body:JSON.stringify(n)})},c=function(t,e){var n=t.className;t.classList.remove(n),t.classList.add(e)},i=function(t,e){document.querySelector(t).style.left="".concat(e,"px")},d=function(t,e){document.querySelector(t).style.left="".concat(e,"px")},o=function(t){return[].indexOf.call(t.parentNode.children,t)},l=function(){d(".loading",0);var t=document.querySelector(".edit-note-textarea"),e=t.dataset.target,n=t.dataset.columnId,c=document.getElementById("card-".concat(e)),i=t.value,o={title:i,contents:""},l=a.REQUEST_URL+"/categories/".concat(n,"/cards/").concat(e);r(l,"PUT",o).then((function(t){return t.json()})).then((function(t){"404"==t.status?alert(t.status+" : "+t.error):(c.innerText=i,d(".loading",-1600),u())}))},u=function(){document.querySelector(".edit-note-background").style.left="-1600px"},s=function(){document.querySelector(".edit-note-close-btn").addEventListener("click",(function(){u()})),document.querySelector(".edit-note-save-btn").addEventListener("click",(function(){l()}))},m=function(){document.querySelector(".edit-note-background").style.left="0px"},f=function(t){document.querySelector(".edit-note-textarea").value=t},v={draggedItem:null,draggedItemAfterimage:null,draggedItemIndex:null,draggedItemColumnId:null};function g(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var h=function(){function t(e,n,a,r,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.columnId=e,this.columnName=n,this.cardContent=a,this.cardID=r,this.renderDirection=c,this.cardHTML='<li class="card" id="card-'.concat(this.cardID,'" draggable="true" data-columnid="').concat(this.columnId,'" data-cardid=').concat(this.cardID,'>\n        <div class="list-icon" id="list-icon-').concat(this.cardID,'"><i class="far fa-newspaper"></i></div>\n        <div class="card-content">\n            <div class="content" id="card-').concat(this.cardID,'">').concat(this.cardContent,'</div>\n            <div class="writer-message">Added by <span class="writer-id">hyewon3938</span></div>\n        </div>\n        <button class="btn-list-delete" id="btn-list-delete-').concat(this.cardID,'"><i class="fas fa-times"></i></button>\n    </li>'),this.makeCard(this.renderDirection),this.registerEventListener()}var e,n,i;return e=t,(n=[{key:"registerEventListener",value:function(){var t=this;document.getElementById("btn-list-delete-".concat(this.cardID)).addEventListener("click",(function(){t.btnDeleteClickHandler()})),document.getElementById("list-icon-".concat(this.cardID)).addEventListener("click",(function(){t.btnEditClickHandler()}));var e=document.getElementById("card-".concat(this.cardID));e.cloneNode(!0),e.addEventListener("dragstart",(function(t){v.draggedItem=e;var n=v.draggedItem.cloneNode(!0);v.draggedItemAfterimage=n,v.draggedItemColumnId=e.dataset.columid,setTimeout((function(){c(e,"card-hold"),c(v.draggedItemAfterimage,"card-hold")}),0)})),e.addEventListener("dragend",(function(){setTimeout((function(){c(e,"card"),c(v.draggedItemAfterimage,"card-hold")}),0)}))}},{key:"makeCard",value:function(t){var e="list-".concat(this.columnId);document.getElementById(e).insertAdjacentHTML(t,this.cardHTML)}},{key:"btnDeleteClickHandler",value:function(){confirm("선택하신 카드를 삭제하시겠습니까?")&&(d(".loading",0),this.requestDeletingCard())}},{key:"requestDeletingCard",value:function(){var t=this,e={title:this.cardContent,contents:""},n=a.REQUEST_URL+"/categories/".concat(this.columnId,"/cards/").concat(this.cardID);r(n,"DELETE",e).then((function(t){202!=t.status&&t.json()})).then((function(e){null!=e&&"404"==e.status?alert(e.status+" : "+e.error):(t.removeCard(),t.renderCardTotal(),d(".loading",-1600))}))}},{key:"btnEditClickHandler",value:function(){var t=document.getElementById("list-icon-".concat(this.cardID)).closest(".card").querySelector(".content").innerText,e=document.querySelector(".edit-note-textarea");e.dataset.target=this.cardID,e.dataset.columnId=this.columnId,f(t),m()}},{key:"removeCard",value:function(){document.getElementById("btn-list-delete-".concat(this.cardID)).closest(".card").remove()}},{key:"renderCardTotal",value:function(){var t=document.getElementById("list-total-".concat(this.columnId)),e=document.getElementById("list-".concat(this.columnId));t.innerHTML=e.childElementCount}}])&&g(e.prototype,n),i&&g(e,i),t}();function y(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var I=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.columnId=e,this.columnName=n,this.cardFormHTML='\n        <div class="add-list-text">\n            <textarea id="textarea-'.concat(this.columnName,'" placeholder="Enter a note" maxlength=50></textarea>\n        </div>\n        <div class="add-list-btn">\n        <button class="btn-list-add" id="btn-list-add-').concat(this.columnName,'">Add</button>\n        <button class="btn-list-cancel" id="btn-list-cancel-').concat(this.columnName,'">Cancel</button>\n        </div>\n      ')}var e,n,o;return e=t,(n=[{key:"registerEventListener",value:function(){var t=this,e=document.getElementById("btn-list-cancel-".concat(this.columnName)),n=document.getElementById("btn-list-add-".concat(this.columnName)),a=document.getElementById("textarea-".concat(this.columnName));e.addEventListener("click",(function(){t.cancelBtnClickHandler()})),n.addEventListener("click",(function(){t.addBtnClickHandler(),t.renderCardTotal()})),a.addEventListener("keyup",(function(){t.activateAddBtn()}))}},{key:"cancelBtnClickHandler",value:function(){var t=document.getElementById("textarea-".concat(this.columnName)),e=document.getElementById("btn-list-add-".concat(this.columnName));t.value="",c(e,"btn-list-add")}},{key:"addBtnClickHandler",value:function(){var t=document.getElementById("textarea-".concat(this.columnName));t.value.length<=0||(i(".loading",0),this.requestAddingCard(t.value))}},{key:"requestAddingCard",value:function(t){var e=this,n=a.REQUEST_URL+"/categories/".concat(this.columnId,"/cards");r(n,"POST",{title:t,contents:""}).then((function(t){return t.json()})).then((function(t){"404"==t.status?alert(t.status+" : "+t.error):(e.addCard(t),d(".loading",-1600))}))}},{key:"addCard",value:function(t){var e=document.getElementById("textarea-".concat(this.columnName)),n=document.getElementById("btn-list-add-".concat(this.columnName));new h(this.columnId,this.columnName,t.title,t.id,"afterbegin"),e.value="",c(n,"btn-list-add"),this.renderCardTotal()}},{key:"activateAddBtn",value:function(){var t=document.getElementById("textarea-".concat(this.columnName)),e=document.getElementById("btn-list-add-".concat(this.columnName));t.value.length>0?c(e,"btn-list-add-active"):c(e,"btn-list-add")}},{key:"renderCardTotal",value:function(){var t=document.getElementById("list-total-".concat(this.columnId)),e=document.getElementById("list-".concat(this.columnId));t.innerHTML=e.childElementCount}}])&&y(e.prototype,n),o&&y(e,o),t}();function b(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,c=!0,i=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return c=t.done,t},e:function(t){i=!0,r=t},f:function(){try{c||null==a.return||a.return()}finally{if(i)throw r}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function p(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var C=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.columnId=e.id,this.columnData=e,this.columnName=e.title,this.cardForm=new I(this.columnId,this.columnName),this.columnHTML='<div class="column" id="'.concat(this.columnId,'">\n    <div class="column-header">\n        <div class="list-total" id="list-total-').concat(this.columnId,'"></div>\n        <div class="column-title">').concat(this.columnName,'</div>\n        <button class="btn-add" id="add-').concat(this.columnId,'" value="0"><i class="fas fa-plus"></i></button>\n        <button class="btn-close"><i class="fas fa-times"></i></button></div>\n    <div class="column-content">\n        <div class="add-list-wrap" id="add-list-wrap-').concat(this.columnId,'"></div>\n        <ul class="list" id="list-').concat(this.columnId,'" data-columnid="').concat(this.columnId,'"></ul></div></div>'),this.init()}var e,n,i;return e=t,(n=[{key:"render",value:function(){document.querySelector(".column-wrap").insertAdjacentHTML("beforeend",this.columnHTML)}},{key:"init",value:function(){this.render(),this.registerEventListener(),this.renderCard(),this.renderCardTotal(this.columnId)}},{key:"registerEventListener",value:function(){var t=this,e=document.getElementById("add-".concat(this.columnId));e.addEventListener("click",(function(){t.columnPlusBtnClickHandler(e)}));var n=document.getElementById("list-".concat(this.columnId));n.addEventListener("dragover",(function(t){t.preventDefault()})),n.addEventListener("dragenter",(function(t){t.preventDefault(),c(v.draggedItem,"card-hold"),v.draggedItem.dataset.columnid==n.dataset.columnid&&c(v.draggedItemAfterimage,"none"),v.draggedItem.dataset.columnid!=n.dataset.columnid&&c(v.draggedItemAfterimage,"card-hold"),n.append(v.draggedItemAfterimage)})),n.addEventListener("dragleave",(function(t){t.preventDefault()})),n.addEventListener("drop",(function(){if(v.draggedItemAfterimage.remove(),v.draggedItem.dataset.columnid!=n.dataset.columnid){n.append(v.draggedItem),v.draggedItem.dataset.columnid=n.dataset.columnid,v.draggedItemIndex=o(v.draggedItem);var e,a=b(document.querySelectorAll(".column"));try{for(a.s();!(e=a.n()).done;){var r=e.value;t.renderCardTotal(r.id)}}catch(t){a.e(t)}finally{a.f()}t.requestMovingCard()}}))}},{key:"renderCardTotal",value:function(t){var e=document.getElementById("list-total-".concat(t)),n=document.getElementById("list-".concat(t));e.innerHTML=n.childElementCount}},{key:"renderCard",value:function(){for(var t=this.columnData.cards,e=0;e<t.length;e++)new h(this.columnId,this.columnName,t[e].title,t[e].id,"beforeend")}},{key:"columnPlusBtnClickHandler",value:function(t){var e="add-list-wrap-".concat(this.columnId),n=document.getElementById(e);0==t.value?(n.innerHTML=this.cardForm.cardFormHTML,t.value=1,this.cardForm.registerEventListener()):1==t.value&&(n.innerHTML="",t.value=0)}},{key:"requestMovingCard",value:function(){var t=a.REQUEST_URL+"/categories/".concat(v.draggedItem.dataset.columnid,"/cards"),e=null;null!=v.draggedItem.previousSibling&&(e=parseInt(v.draggedItem.previousSibling.dataset.cardid));var n={cardId:parseInt(v.draggedItem.dataset.cardid),prevCardId:e};r(t,"PUT",n).then((function(t){}))}}])&&p(e.prototype,n),i&&p(e,i),t}(),k=function(){var t=document.querySelector(".btn-menu"),e=document.querySelector(".menu-btn-close"),n=document.querySelector(".menu");t.addEventListener("click",(function(){n.style.right=0,n.style.transition="0.5s"})),e.addEventListener("click",(function(){n.style.right="-450px",n.style.transition="0.5s"}))};window.addEventListener("DOMContentLoaded",(function(){i(".loading",0);var t=a.REQUEST_URL;r(t,"GET").then((function(t){return t.json()})).then((function(t){if("404"==t.status)alert(t.status+" : "+t.error);else{new C(t.categories[2]),new C(t.categories[1]),new C(t.categories[0]);k(),s(),d(".loading",-1600)}}))}))}]);